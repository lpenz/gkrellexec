language: none
env:
  global:
    - secure: ToQT007trbuH7Z+msiN7vq7cnQgF6ltfbmY57bmL+L4YfNHz64BWeBBBRRFzEOPfbaqJgTQauQuH3P+g65h1yF54oBtkfd5v9kChoUrBlHJfeDBG3EEzbwwdkEdxUW6dk7SXail7QEU29KpJhPQu+Wf7zvlIjPjKZHydk1OR5RnrtdFaa9i5ZDS9N1yrPRCrukLLpmjBzJzRBFtJToVtqnAp/lHVXtBDmYbXzvdSnO8q0vzJhir5LDPO2d9J7aUFxvDsz1e5oR92hR4p2IbQszr0ms53/l3I1Ao4dA5o062jYJUP9R34Y+KfYmXReu4FMnLowaOwNI0JD1nkY6JXAQ==
build:
  pre_ci:
    - docker build -t image:latest .
  pre_ci_boot:
    image_name: image
    image_tag: latest
    pull: false
    options: "-v $PWD:/home/user/work -e MY_UID=$UID"
  ci:
    - make
    - dpkg-buildpackage -uc -us
  on_success:
    - cd ..
    - package_cloud push lpenz/lpenz/debian/stretch *.deb
